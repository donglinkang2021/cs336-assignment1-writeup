\documentclass{article}
\usepackage[authoryear, round]{natbib} % Citation format
\usepackage[hidelinks]{hyperref}   % Hyperlink support
\usepackage{tcolorbox}
\usepackage{amsmath}    % Math formula support
\usepackage{amssymb}    % Math symbol support
\usepackage{amsfonts}   % Math font support
\usepackage{amsthm}     % Theorem environment support
\usepackage{booktabs}   % Table formatting support, for bottomrule, midrule, toprule
\usepackage{subcaption} % for subcaption
\usepackage{float} % for figure placement [H]
\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newtheorem{proposition}{Proposition}
\usepackage{algorithm, algorithmicx, algpseudocode} % Algorithm support
\usepackage{lmodern}
\usepackage{graphicx}   % Image support
\usepackage{listings}   % Code highlighting support
\usepackage{geometry}   % Page setup
\geometry{a4paper, margin=0.5in} % Set page size and margins
\usepackage{tikz} % TikZ drawing support
\usetikzlibrary{mindmap, shadings}
\usepackage{enumitem} % Enhanced list environments
\usepackage{xeCJK}  % Support for Chinese characters
\setCJKmainfont[BoldFont={SimHei}]{SimSun}

\usepackage{xcolor}    % Color support
\definecolor{lightgray}{gray}{0.90} % Light gray
\definecolor{commentgreen}{rgb}{0.161, 0.510, 0.322} % Define custom green
\definecolor{answercolor}{rgb}{0.0, 0.0, 0.8} % Blue for answers

\lstdefinestyle{pythonstyle}{
    language=Python,
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue},
    stringstyle=\color{red},
    commentstyle=\color{commentgreen},
    morecomment=[l][\color{magenta}]{\#},
    showstringspaces=false,
    breaklines=true,
    frame=single,
    backgroundcolor=\color{lightgray!10},
    escapeinside={(*@}{@*)}, % allow LaTeX commands in code, e.g., (*@\textbf{bold}@*)
    literate={'}{\textquotesingle}1 % handle single quotes correctly
}

\lstset{style=pythonstyle} % Set the default style for listings

\newenvironment{answer}{%
    \par\vspace{0.5em}%
    \noindent\textcolor{blue!75!black}{\textbf{Answer:}}%
    \par\vspace{0.2em}%
    \leftskip=1em%
    \rightskip=1em%
    \begin{quote}%
    \color{blue!20!black}%
}{%
    \end{quote}%
    \par\vspace{0.5em}%
}

\newtcolorbox{note}{
    colback=green!5!white,
    colframe=green!75!black,
    title=Note,
    fonttitle=\bfseries,
    left=2mm,
    right=2mm,
    boxsep=1mm
}

% Adjust spacing around figures and captions
\setlength{\abovecaptionskip}{0pt}   % default 10pt
\setlength{\belowcaptionskip}{0pt}   % default 0pt

% Define problem counter and environment
\newcounter{problem}
\newcommand{\problem}[2]{
    \stepcounter{problem}
    \subsection{Problem (\texttt{#1}): #2}
    \vspace{-1.5em} % Reduce space after subsection
    \noindent
}

% Remove paragraph indentation and add spacing
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt}

\title{CS336 Assignment 1 Writeup}
\author{Linkang Dong}
\date{\today}

\begin{document}

\maketitle

% Add table of contents
\tableofcontents
\newpage

\input{sections/1-overview.tex}
\input{sections/2-tokenizer.tex}
\input{sections/3-transformer.tex}
\input{sections/4-training-lm.tex}
\input{sections/5-training-loop.tex}
\input{sections/6-generating.tex}
\input{sections/7-experiments.tex}

\newpage
\bibliographystyle{plainnat}
\bibliography{ref}

\appendix
\input{sections/appendix.tex}

\end{document}